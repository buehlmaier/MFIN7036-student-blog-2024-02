<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="MFIN7036 Students 2024" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Group TextCraft, Progress Report, " />

<meta property="og:title" content="Conducting Sentiment Analysis on Federal Reserve Speeches (by Group &#34;TextCraft&#34;) "/>
<meta property="og:url" content="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/conducting-sentiment-analysis-on-federal-reserve-speeches-by-group-textcraft.html" />
<meta property="og:description" content="Abstract After processing the data, sentiment analysis was conducted on the Federal Reserve (the abbreviation of FR will be used throughout the following text) speeches to obtain sentiment scores of the text. Word Cloud analysis was first applied to visualize the sentiment of the FR text. Next, the VADER tool …" />
<meta property="og:site_name" content="MFIN7036 Student Blog 2024" />
<meta property="og:article:author" content="MFIN7036 Students 2024" />
<meta property="og:article:published_time" content="2024-03-19T15:56:00+08:00" />
<meta name="twitter:title" content="Conducting Sentiment Analysis on Federal Reserve Speeches (by Group &#34;TextCraft&#34;) ">
<meta name="twitter:description" content="Abstract After processing the data, sentiment analysis was conducted on the Federal Reserve (the abbreviation of FR will be used throughout the following text) speeches to obtain sentiment scores of the text. Word Cloud analysis was first applied to visualize the sentiment of the FR text. Next, the VADER tool …">

        <title>Conducting Sentiment Analysis on Federal Reserve Speeches (by Group &#34;TextCraft&#34;)  · MFIN7036 Student Blog 2024
</title>
        <link href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="MFIN7036 Student Blog 2024 - Full Atom Feed" />



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/"><span class=site-name>MFIN7036 Student Blog 2024</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://buehlmaier.github.io/MFIN7036-student-blog-2024-02
                                    >Home</a>
                                </li>
                                <li ><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/categories.html">Categories</a></li>
                                <li ><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/tags.html">Tags</a></li>
                                <li ><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/conducting-sentiment-analysis-on-federal-reserve-speeches-by-group-textcraft.html">
                Conducting Sentiment Analysis on Federal Reserve Speeches (by Group "TextCraft")
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <h2>Abstract</h2>
<p>After processing the data, sentiment analysis was conducted on the Federal Reserve (the abbreviation of FR will be used throughout the following text) speeches to obtain sentiment scores of the text. Word Cloud analysis was first applied to visualize the sentiment of the FR text. Next, the VADER tool was used to assign scores to each text and observe the relationship between inflation rates. However, the results may be biased due to certain limitations. Alternatively, the Dictionary Method was used to calculate the sentiment scores. We also perform the data merging and correlation matrix analysis for our future data analysis.  In the future, we will conduct regression analysis to discuss the relationship between inflation rate and sentiment index scores.</p>
<h2>Word Cloud Analysis</h2>
<p>Word Cloud represents text data in the form of tags, where the size and colour of each tag reflect the importance of the word. This technique is useful for quickly gaining insight into the most prominent items in a given text by visualizing word frequency as a weighted list. The code below was used to generate world coulds:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Read the CSV file</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;cleaned.csv&#39;</span><span class="p">)</span>

<span class="c1"># Create a word cloud from is in the third column</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>

<span class="c1"># Create a WordCloud object</span>
<span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="c1"># Display the word cloud</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>  <span class="c1"># Turn off the axis</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Remove padding around the figure</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>Three speeches from different periods were selected and analysed to identify the different sentiments conveyed by the Federal Reserve. The results displayed various keywords for each period.</p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_wordclouds.jpg"></p>
<p>During the pandemic period, concerns were raised about weak consumption and the bankruptcy of many enterprises potentially leading to another global crisis. In a mid-2020 speech titled "Recovery," frequent mentions of words such as "Crisis," "measure," and "support" suggest a preference for stimulus measures to address the economic recession caused by the Covid pandemic.</p>
<p>In mid-2022, inflation surged due to geopolitical uncertainties and supply chain issues stemming from the pandemic. Frequent mentions of words like "Inflation," "Expectation," "fund rate," and "goal" aligned with the Fed's aggressive tight monetary policy aimed at reducing inflation. Although the inflation rate appeared to have returned to normal levels (3.1% in Jan 2024), many lower-income households continued to struggle due to the higher price level.</p>
<p>In an early 2024 speech, high-frequency words such as "inflation," "supply," "unemployment," and "trade-off" indicated that the committee remained cautious about the US inflation rate and adopted a wait-and-see approach.</p>
<h2>VADER Analysis</h2>
<p>VADER (Valence Aware Dictionary and Sentiment Reasoner) is a sentiment analysis tool that uses a lexicon and rule-based approach to evaluate the sentiment expressed in each text. It is specifically designed to analyse sentiments expressed in social media, but it can also be used to analyse other kinds of texts. VADER works by calculating the percentage of a text that can be categorized as positive, negative, or neutral and produces a compound score that is the sum of the lexicon rating for each word in the text.</p>
<p>Because VADER is easy to implement and does not require training data, it was used to quickly assign sentiment scores to each FR text.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">nltk</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;punkt&#39;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;averaged_perceptron_tagger&#39;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;maxent_ne_chunker&#39;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;words&#39;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;vader_lexicon&#39;</span><span class="p">)</span>

<span class="c1">#read the file</span>
<span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;cleaned.csv&#39;</span><span class="p">)</span>

<span class="c1">#add &quot;ID&quot; column </span>
<span class="n">df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

<span class="c1">#VADER sentiment analysis</span>
<span class="kn">from</span> <span class="nn">nltk.sentiment</span> <span class="kn">import</span> <span class="n">SentimentIntensityAnalyzer</span>
<span class="kn">from</span> <span class="nn">tqdm.notebook</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="n">sia</span><span class="o">=</span><span class="n">SentimentIntensityAnalyzer</span><span class="p">()</span>

<span class="c1">#run the polarity score on the entire dataset</span>
<span class="n">res</span><span class="o">=</span><span class="p">{}</span> 
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">(),</span><span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="n">Text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
    <span class="n">Myid</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span>
    <span class="n">res</span><span class="p">[</span><span class="n">Myid</span><span class="p">]</span><span class="o">=</span><span class="n">sia</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>

<span class="c1">#merge the dataframe</span>
<span class="n">vaders</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">vaders</span><span class="o">=</span><span class="n">vaders</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="s1">&#39;ID&#39;</span><span class="p">})</span>
<span class="n">vaders</span><span class="o">=</span><span class="n">vaders</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
</code></pre></div>

<p>An example of the output is shown below:</p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_vaderoutput1.jpg"></p>
<p>We output the results as csv.file. Then, the relationship between VADER scores and inflation rate was visualized through the line chart. From the graph, there is no obviuos realationship between VADER sentiment scores and inflation rate (correlation will be calculated in the later part).</p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_vaderoutput2.jpg"></p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_vaderoutput3.jpg"></p>
<p>We cannot draw a conclusion because VADER relies heavily on the lexicon, a word may not be accurately classified if it is not present in the lexicon. These limitations may be the possible reasons why VADER did not perform well in FR speeches with complex sentences, which could lead to bias in the results obtained.</p>
<h2>Dictionary Method</h2>
<p>Alternatively, a Dictionary Method was applied to perform sentiment analysis. Instead of directly importing the built-in dictionary, we created a new customized dictionary that is focused more on economic contents so that the classification and score assignment for FR speech would be more efficient and reliable.</p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_dicm_dictionary.jpg"></p>
<p>Next, each sentence in the FR speech was classified as positive or negative based on the presence of keywords and polarized terms. Positive terms include the words related to economic boom and proactive action while negative terms encompass the economic recession and hawkish action.</p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_dicm_terms.jpg"></p>
<p>The code is as follows:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># set keyword dic, polarity dic</span>
<span class="n">excel_file</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s1">&#39;dictionary_list.xlsx&#39;</span><span class="p">)</span> 
<span class="n">dic_list</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">sheet_name</span> <span class="ow">in</span> <span class="n">excel_file</span><span class="o">.</span><span class="n">sheet_names</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">excel_file</span><span class="p">,</span><span class="n">sheet_name</span><span class="p">)</span>
    <span class="n">dic_list</span><span class="p">[</span><span class="n">sheet_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">keyword_dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">dic_list</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;hawkish&#39;</span><span class="p">,</span> <span class="s1">&#39;dovish&#39;</span><span class="p">]}</span>
<span class="n">polarity_dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">dic_list</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;positive&#39;</span><span class="p">,</span> <span class="s1">&#39;negative&#39;</span><span class="p">]}</span>

<span class="n">value_list1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">keyword_dic</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> 
<span class="n">value_list2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">polarity_dic</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>         


<span class="c1"># define a method to screen out the sentences with keyword for each speech through iteration </span>
<span class="k">def</span> <span class="nf">get_key_sen</span><span class="p">(</span><span class="n">speech</span><span class="p">):</span>
    <span class="n">sentences</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[.?!]\s&#39;</span><span class="p">,</span> <span class="n">speech</span><span class="p">)</span>
    <span class="n">keyword_sentences</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
        <span class="n">words1</span> <span class="o">=</span> <span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">words1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value_list1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value_list1</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                 <span class="n">keyword_sentences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
                 <span class="k">break</span>  <span class="c1"># finish internal iteration</span>
        <span class="k">else</span><span class="p">:</span>
             <span class="k">continue</span>
    <span class="k">return</span> <span class="n">keyword_sentences</span>
</code></pre></div>

<p>Scores were then assigned to each sentence based on the categorization. If a sentence was categorized as hawkish and had more positive terms than negative terms, a score of +1 was assigned. If it was categorized as hawkish but had more negative terms than positive terms, a score of -1 was assigned. If a sentence was categorized as dovish and had more positive terms than negative terms, a score of -1 was assigned. If it was categorized as dovish but had more negative terms than positive terms, a score of +1 was assigned. Any other case resulted in a score of 0. The sentiment index was calculated by taking the average of the scores for each sentence with the respective keyword dictionary. </p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_dicm_formula.jpg"></p>
<p>The code as follows:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># define a method to categorize each sentence and calculate the amount of polarity words through iteration </span>
<span class="k">def</span> <span class="nf">get_sen_scores</span><span class="p">(</span><span class="n">keyword_sentences</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>  
    <span class="k">for</span> <span class="n">key_sen</span> <span class="ow">in</span> <span class="n">keyword_sentences</span><span class="p">:</span>
        <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">positive_count</span> <span class="o">=</span> <span class="mi">0</span>  
        <span class="n">negative_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">words2</span> <span class="o">=</span> <span class="n">key_sen</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># words2 is a list including strings</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">words2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">value_list1</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;hawkish&#39;</span>  
            <span class="k">elif</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">value_list1</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;dovish&#39;</span>
                <span class="k">break</span>

            <span class="n">index</span> <span class="o">=</span> <span class="n">words2</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="c1"># return index of polarity word</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">value_list2</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> 
               <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s2">&quot;not&quot;</span> <span class="ow">in</span> <span class="n">words2</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="n">index</span><span class="p">]</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">words2</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span> <span class="ow">and</span> <span class="s2">&quot;not&quot;</span> <span class="ow">in</span> <span class="n">words2</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">index</span><span class="o">+</span><span class="mi">3</span><span class="p">]:</span> 
                  <span class="n">positive_count</span> <span class="o">+=</span> <span class="mi">1</span>
               <span class="k">else</span><span class="p">:</span>
                  <span class="n">negative_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">value_list2</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
               <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s2">&quot;not&quot;</span> <span class="ow">in</span> <span class="n">words2</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="n">index</span><span class="p">]</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">words2</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span> <span class="ow">and</span> <span class="s2">&quot;not&quot;</span> <span class="ow">in</span> <span class="n">words2</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">index</span><span class="o">+</span><span class="mi">3</span><span class="p">]:</span> 
                  <span class="n">negative_count</span> <span class="o">+=</span> <span class="mi">1</span>
               <span class="k">else</span><span class="p">:</span>
                  <span class="n">positive_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># calculate the sentiment score of each sentence</span>
        <span class="n">sen_score</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;hawkish&#39;</span><span class="p">:</span>
           <span class="k">if</span> <span class="n">positive_count</span> <span class="o">&gt;</span> <span class="n">negative_count</span><span class="p">:</span>
              <span class="n">sen_score</span> <span class="o">=</span> <span class="mi">1</span>
           <span class="k">elif</span> <span class="n">positive_count</span> <span class="o">&lt;</span> <span class="n">negative_count</span><span class="p">:</span>
               <span class="n">sen_score</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;dovish&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">positive_count</span> <span class="o">&gt;</span> <span class="n">negative_count</span><span class="p">:</span>
                <span class="n">sen_score</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">positive_count</span> <span class="o">&lt;</span> <span class="n">negative_count</span><span class="p">:</span>
                <span class="n">sen_score</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sen_score</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">key_sen</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span><span class="n">positive_count</span><span class="p">,</span><span class="n">negative_count</span><span class="p">,</span><span class="n">sen_score</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="c1"># define a method to calculate the sentiment score of each speech</span>
<span class="k">def</span> <span class="nf">get_speech_scores</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
    <span class="n">score</span> <span class="o">=</span> <span class="p">[</span><span class="n">sub_list</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="k">for</span> <span class="n">sub_list</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
    <span class="n">sen_num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="n">sentiment_score</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">sen_num</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sentiment_score</span>

<span class="c1"># iterate all the speeches </span>
<span class="n">speeches</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:]</span>
<span class="n">sentiment_index</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">speech</span> <span class="ow">in</span> <span class="n">speeches</span><span class="p">:</span>
    <span class="n">keyword_sentences</span> <span class="o">=</span> <span class="n">get_key_sen</span><span class="p">(</span><span class="n">speech</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_sen_scores</span><span class="p">(</span><span class="n">keyword_sentences</span><span class="p">)</span>
    <span class="n">sentiment_score</span> <span class="o">=</span> <span class="n">get_speech_scores</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="n">sentiment_index</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sentiment_score</span><span class="p">)</span>

<span class="c1">#print(sentiment_index)</span>
<span class="n">sentiment_index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">sentiment_index</span><span class="p">)</span> <span class="c1"># transfer data into Series type</span>
<span class="c1"># standardize the sentiment score</span>
<span class="n">mean_value</span> <span class="o">=</span> <span class="n">sentiment_index</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">std_value</span> <span class="o">=</span> <span class="n">sentiment_index</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;mean:&quot;</span><span class="p">,</span> <span class="n">mean_value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;sd:&quot;</span><span class="p">,</span> <span class="n">std_value</span><span class="p">)</span>   
<span class="n">standardized_index</span> <span class="o">=</span> <span class="p">(</span><span class="n">sentiment_index</span> <span class="o">-</span> <span class="n">mean_value</span><span class="p">)</span> <span class="o">/</span> <span class="n">std_value</span>
<span class="nb">print</span><span class="p">(</span><span class="n">standardized_index</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">standardized_index</span> <span class="c1"># new column added to df</span>
</code></pre></div>

<p>We output the sentiment index as csv file.</p>
<div class="highlight"><pre><span></span><code><span class="n">outputpath</span> <span class="o">=</span> <span class="s1">&#39;sentiment_index.csv&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">outputpath</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p>The relationship between inflation rate and the sentiment index scores from FR speeches can be observed by visualizing the sentiment index scores. </p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_dicm_linechart.jpg"></p>
<p>However, though the dictionary method succeeded in calculating the sentiment score, an issue couldn not be ignored is that the efficiency and hashrate of the model is relatively weak since the model utilized lots of iteration, once the data volume is larger the workload for the calculation would also become heavier. Therefore, the optimization of model is one of the future work we should finish.</p>
<h2>Data Merging</h2>
<p>After we have calculated the VADER scores and Dictionary scores respectively, we merge the scores gotten from the two methods, and then merge it with the inflation rate data. Firstly, we import all datasets that we used:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">inflation</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;inflation.xlsx&#39;</span><span class="p">,</span><span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Sheet3&quot;</span><span class="p">)</span> <span class="c1">#import inflation data</span>
<span class="n">score</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;sentiment_index.csv&#39;</span><span class="p">)</span> <span class="c1">#import data we got from Dictionary method</span>
<span class="n">vader</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;vaderoutput.csv&#39;</span><span class="p">)</span> <span class="c1">#import data we got from VADER method</span>
</code></pre></div>

<p>Before merging the two dataset (gotten from VADER methods and Dictionary methods), we preprocess the data again for merging (eg.convert the ‘date’ variable into date type, only keep the key columns that we want to use, sort the data according to the first key ‘date’ and the second key ‘title’, and create the ‘ID’ column for merging).</p>
<div class="highlight"><pre><span></span><code><span class="n">score</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">score</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
<span class="n">vader</span><span class="o">=</span><span class="n">vader</span><span class="p">[[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;text&#39;</span><span class="p">,</span><span class="s1">&#39;neg&#39;</span><span class="p">,</span><span class="s1">&#39;neu&#39;</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">,</span><span class="s1">&#39;compound&#39;</span><span class="p">]]</span>
<span class="n">score</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="n">score</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="c1">#sort data &amp; insert an &quot;ID&quot; column</span>
<span class="n">vader</span> <span class="o">=</span> <span class="n">vader</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="n">vader</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">vader</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="c1">#sort data &amp; insert an &quot;ID&quot; column</span>
</code></pre></div>

<p>Then we merge the two sentiment datasets into one on the ‘ID’ columns:</p>
<div class="highlight"><pre><span></span><code><span class="n">sentiment</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">vader</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">])</span>
<span class="k">del</span> <span class="n">sentiment</span><span class="p">[</span><span class="s1">&#39;title_y&#39;</span><span class="p">],</span><span class="n">sentiment</span><span class="p">[</span><span class="s1">&#39;date_y&#39;</span><span class="p">],</span><span class="n">sentiment</span><span class="p">[</span><span class="s1">&#39;text_y&#39;</span><span class="p">]</span>
<span class="n">sentiment</span> <span class="o">=</span> <span class="n">sentiment</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;title_x&#39;</span><span class="p">:</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;date_x&#39;</span><span class="p">:</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> 
                                      <span class="s1">&#39;text_x&#39;</span><span class="p">:</span> <span class="s1">&#39;text&#39;</span><span class="p">})</span>
<span class="n">sentiment</span><span class="p">[</span><span class="s1">&#39;Mdate&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">sentiment</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
</code></pre></div>

<p>To merge the one sentiment dataset and inflation dataset, we preprocess the data from inflation. And because the predicted variable (inflation rate) is monthly, we also aggregate the sentiment dataset by month to take the mean:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#Preprocess the data from inflation</span>
<span class="n">inflation</span><span class="o">=</span> <span class="n">inflation</span><span class="p">[[</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;inflation rate&#39;</span><span class="p">]]</span>
<span class="n">inflation</span><span class="p">[</span><span class="s1">&#39;Mdate&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">inflation</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="c1">#Aggregate the sentiment dataset by month</span>
<span class="n">Msentiment</span> <span class="o">=</span> <span class="n">sentiment</span><span class="p">[[</span><span class="s1">&#39;neg&#39;</span><span class="p">,</span><span class="s1">&#39;neu&#39;</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">,</span><span class="s1">&#39;compound&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;Mdate&#39;</span><span class="p">]]</span>
<span class="n">Msentiment</span> <span class="o">=</span> <span class="n">Msentiment</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Grouper</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;neu&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span><span class="s1">&#39;compound&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sentiment_index&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">})</span>
<span class="n">Msentiment</span> <span class="o">=</span> <span class="n">Msentiment</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="c1">#drop rows with NaN values</span>
<span class="n">Msentiment</span><span class="p">[</span><span class="s1">&#39;Mdate&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Msentiment</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Then we merge the sentiment dataset and inflation dataset on month:</p>
<div class="highlight"><pre><span></span><code><span class="n">Merge</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">Msentiment</span><span class="p">,</span><span class="n">inflation</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Mdate&#39;</span><span class="p">])</span>
</code></pre></div>

<h2>Correlation matrix</h2>
<p>After we merge all datasets, first, we roughly check correlation between the inflation rate and scores gotten from two methods:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#Calculate the correlation matrix without any time lags</span>
<span class="n">Merge_select</span><span class="o">=</span><span class="n">Merge</span><span class="p">[[</span><span class="s1">&#39;neg&#39;</span><span class="p">,</span><span class="s1">&#39;neu&#39;</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">,</span><span class="s1">&#39;compound&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">,</span><span class="s1">&#39;inflation rate&#39;</span><span class="p">]]</span>
<span class="n">Correlation_matrix</span> <span class="o">=</span> <span class="n">Merge_select</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>

<p>From the results, we can see the correlation between the inflation rate and Dictionary method scores (sentiment_index) is -0.42 (which is negative and the degree is moderate). We choose this variables to create lags for furthur analysis.</p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_matrixresult2.jpg"></p>
<p>Since the sentiment score is also likely to reflect future inflation expectations, we create 12 months lags on the sentiment_index:</p>
<div class="highlight"><pre><span></span><code><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index1&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index2&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index3&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index4&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index5&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index6&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">6</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index7&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">7</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index8&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">8</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index9&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">9</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index10&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index11&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">11</span><span class="p">)</span>
<span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index12&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Merge</span><span class="p">[</span><span class="s1">&#39;sentiment_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">+</span><span class="mi">12</span><span class="p">)</span>
</code></pre></div>

<p>We create the correlation matrix and plot the heat map:</p>
<div class="highlight"><pre><span></span><code><span class="n">Merge1</span><span class="o">=</span><span class="n">Merge</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">Merge_select1</span><span class="o">=</span><span class="n">Merge1</span><span class="p">[[</span>
    <span class="s1">&#39;sentiment_index&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index1&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index2&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sentiment_index4&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index5&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index6&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index7&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sentiment_index8&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index9&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index10&#39;</span><span class="p">,</span><span class="s1">&#39;sentiment_index11&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sentiment_index12&#39;</span><span class="p">,</span><span class="s1">&#39;inflation rate&#39;</span><span class="p">]]</span>
<span class="n">Correlation_matrix1</span> <span class="o">=</span> <span class="n">Merge_select1</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">#For the heat map</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1">#Visualize the matrix of correlation coefficients using seaborn&#39;s heatmap function</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">Correlation_matrix1</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
<span class="c1">#show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>The result is shown  below:</p>
<p><img alt="alt text" src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/images/TextCraft_02_matrixresult1.jpg"></p>
<h2>Future Discussion</h2>
<p>For the next part, we will conduct the regression analysis to further discuss the relationship between inflation rate and sentiment index scores.  </p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2024-03-19T15:56:00+08:00">Tue 19 March 2024</time>
            <h4>Category</h4>
            <a class="category-link" href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/categories.html#progress-report-ref">Progress Report</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/tags.html#group-textcraft-ref">Group TextCraft
                    <span class="superscript">2</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/buehlmaier/MFIN7036-student-blog-2024-02" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="https://buehlmaier.github.io/MFIN7036-student-blog-2024-02/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>